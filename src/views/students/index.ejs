
<div class="d-flex justify-content-between align-items-center">
  <h1>Students</h1>
  <a class="btn btn-success" href="/students/new">Add Student</a>
</div>

<form class="row g-2 mt-3" method="get">
  <div class="col-md-4">
    <input type="text" class="form-control" name="q" placeholder="Search name/roll/college" value="<%= query.q || '' %>">
  </div>
  <div class="col-md-3">
    <select class="form-select" name="status">
      <option value="">Status</option>
      <option value="placed" <%= query.status==='placed'?'selected':'' %>>placed</option>
      <option value="not_placed" <%= query.status==='not_placed'?'selected':'' %>>not_placed</option>
    </select>
  </div>
  <div class="col-md-3">
    <input type="text" class="form-control" name="batch" placeholder="Batch" value="<%= query.batch || '' %>">
  </div>
  <div class="col-md-2">
    <button class="btn btn-outline-primary w-100">Filter</button>
  </div>
</form>

<table class="table table-striped table-hover mt-3">
  <thead>
    <tr>
      <th>Name</th>
      <th>Roll</th>
      <th>College</th>
      <th>Batch</th>
      <th>Status</th>
      <th>DSA</th>
      <th>WebD</th>
      <th>React</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% if (students.length === 0) { %>
      <tr><td colspan="9" class="text-center text-muted">No students found</td></tr>
    <% } %>
    <% students.forEach(s => { %>
      <tr>
        <td><%= s.name %></td>
        <td><%= s.rollNumber %></td>
        <td><%= s.college %></td>
        <td><%= s.batch %></td>
        <td><span class="badge <%= s.status==='placed'?'bg-success':'bg-secondary' %>"><%= s.status %></span></td>
        <td><%= s.scores?.dsa ?? '' %></td>
        <td><%= s.scores?.webd ?? '' %></td>
        <td><%= s.scores?.react ?? '' %></td>
        <td class="text-end">
          <a href="/students/<%= s._id %>/edit" class="btn btn-sm btn-outline-primary">Edit</a>
          <form action="/students/<%= s._id %>/delete" method="post" class="d-inline">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <button class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this student?')">Delete</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>
